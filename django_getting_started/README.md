# Introduction

This is a course on developing with django using a [pluralsight course](https://app.pluralsight.com/course-player?clipId=08e4d747-4a0e-4216-b614-9a3160f38690) . The documentation for Django can be found @ https://docs.djangoproject.com/en/3.1/

## Get started

- If you have the full version of Pycharm, start with the django template

- Creating a **new Python project** in *Pycharm* community then create an empty python project and then inititalising it with `python -m pip install django` 

  - `django-admin startproject  <ProjectName>` for creating a new project

- `python manage.py runserver` to run the project

- The full course can be found at [django_getting_started](https://github.com/codesensei-courses/django_getting_started)

- Create another folder `python manage.py startapp <folder or domain name>`

- `python manage.py showmigrations` shows migrations not yet set and `python manage.py migrate` migrates the changes

- `python manage.py dbshell` show **sqlite** db entries but it is easier through pycharm database console

- `python manage.py makemigrations` generates a migration based on the model created and needs this to be setup in the applications

- `python manage.py sqlmigrate <modelname> <version>` will migrate the sql generated from the migration

- ` python manage.py migrate` generates the migration into the database

- `python manage.py createsuperuser` to create an **admin** for the site which works on the http://localhost:8000/admin URL

- Django model fields and setting up the models can be found https://docs.djangoproject.com/en/3.1/ref/models/fields/

  ## Anatomy of a Django Project

- Using the meeting project as an example the root project can be found [django_getting_started](django_getting_started)

- The project settings can be found under [meeting_planner](meeting_planner)

- [settings.py](meeting_planner/settings.py) is used for configuring apps, middleware, templates and database settings

- [urls.py](django_getting_started/meeting_planner/urls.py) is used for configuring the routes to the various application folders or application domains

  - [URL's](django_getting_started/meetings/urls.py) found in application domains represent the relative routes under the root URL e.g. meetings will utilise meetings.urls

    ```python
    urlpatterns = [
        path('admin/', admin.site.urls),
        path('', welcome, name="home"),
        path('aboutvincent', about, name="about"),
        path('meetings/', include('meetings.urls'))
    ]
    ```

  - URL's can change any time so if you reference the **url by name**, then the URL references can be autogenerated under the hood by a lookup so no need to change the specific URL (see [welcome.html](django_getting_started/website/templates/website/welcome.html) for more or referencing URL's) 

- [meetings](django_getting_started/meetings) represents a single domain under meeting planner and essentially you can have as many as desiredor as mapped to urls as logical bits of the rest API and possibly this can be seen as an extension of the Domain Driven Design

- The sub domain can be broken up into

  - **models**: create all models to link with views

    ```python
    class Room(models.Model):
        name = models.TextField(max_length=50)
        floor = models.IntegerField(default=1)
        room = models.TextField(max_length=50)
    
        def __str__(self):
            return f'{self.name} on floor {str(self.floor)} room {str(self.room)}'
    ```

  - **views**: create python functions

    ```python
    def detail(request, meeting_id):
        # meeting = Meeting.objects.get(pk=meeting_id)
        meeting = get_object_or_404(Meeting, pk=meeting_id)
        data = dict(meeting=meeting)
        return render(request, "meetings/detail.html", data)
    ```

  - **urls**: create relative routes

    ```python
    urlpatterns = [
        path('<int:meeting_id>', detail, name="detail"),
        path('rooms', rooms, name="rooms")
    ]
    ```

  - **admin**: register admin functionality around data

    ```python
    admin.site.register(Meeting)
    admin.site.register(Room)	
    ```

  - **templates**: create an html template with django templating language

    ```html
    <!-- rooms.html  -->
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>All Rooms</title>
    </head>
    <style>
        dl {
            display: block;
            margin-top: 1em;
            margin-bottom: 1em;
            margin-left: 0;
            margin-right: 0;
        }
    </style>
    <body>
    <h2>All Rooms</h2>
    <div>
        <a href="{% url "home" %}">Back Home</a>
    </div>
    <dl>
        {% for room in rooms %}
            <dt>{{ room.name }}</dt>
            <dd>Floor {{ room.floor }}</dd>
            <dd>Room {{ room.room }}</dd>
        {% endfor %}
    </dl>
    </body>
    </html>
    ```

    

  

